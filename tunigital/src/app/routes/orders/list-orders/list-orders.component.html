<page-header  title="Orders" hideBreadcrumb ></page-header>

<br>
<div>
  <div fxLayout="row wrap" fxLayoutAlign="space-between center" fxLayoutGap="20px grid">
    <div>
      <mat-form-field appearance="fill" [style.fontSize.px]="14">
        <mat-label>Search</mat-label>
        <input placeholder="Search" type="text" (keyup)="applyFilter($event)"  matInput #input />
      </mat-form-field>
    </div>


    <div>
      <button mat-raised-button
(click)="add()"
class="gradient-indigo">
        Add Invoice
      </button>
    </div>
  </div>


  <mat-divider></mat-divider>



    <table mat-table [dataSource]="dataSource" matSort>

      <ng-container matColumnDef="nb">
        <th mat-header-cell *matHeaderCellDef width="7%">#</th>
        <td mat-cell *matCellDef="let order ; index as i">
          {{(dataSource.data.indexOf(order)+1)}}</td>
      </ng-container>
      <mat-divider></mat-divider>

      <ng-container matColumnDef="Order">
        <th mat-header-cell *matHeaderCellDef mat-sort-header width="12%">Order
        </th>
        <td mat-cell *matCellDef="let order">{{ order.nameOrder }}</td>
      </ng-container>
      <mat-divider></mat-divider>

      <ng-container matColumnDef="Company">
        <th mat-header-cell *matHeaderCellDef mat-sort-header width="12%">Company</th>
        <td mat-cell *matCellDef="let order">{{ order.companyOrder.nomCompany }}</td>
      </ng-container>
      <mat-divider></mat-divider>

      <ng-container matColumnDef="Starting_date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header width="26%">Starting date</th>
        <td mat-cell *matCellDef="let order">{{ order.dateDebutOrder | date :'dd/MM/yyyy' }}</td>
      </ng-container>
      <mat-divider></mat-divider>
      <ng-container matColumnDef="Status">
        <th mat-header-cell *matHeaderCellDef mat-sort-header width="13%">Status</th>
        <td mat-cell *matCellDef="let order">{{ (order.statusOrder) ? 'Completed' : 'In Progress' }}</td>
      </ng-container>
      <mat-divider></mat-divider>
      <ng-container matColumnDef="Employee" width="22%">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Employee
        </th>
        <td mat-cell *matCellDef="let order"> <span *ngFor="let employee of order.employeeOrder">{{ employee.nomUser + ' '+employee.prenomUser }} <br> </span></td>
      </ng-container>

      <mat-divider></mat-divider>
      <ng-container matColumnDef="action">
        <th mat-header-cell *matHeaderCellDef>Action</th>
        <td mat-cell *matCellDef="let order">
          <button class="button24"
          mat-icon-button
                  matTooltip="Edit"
                  (click)="edit(order._id)"
                  >
            <mat-icon class="icon24">create</mat-icon>
          </button>
          &nbsp;
          <button class="button24" mat-icon-button color="accent"
                  matTooltip="View"
                (click)="view(order._id)"
                 >
            <mat-icon class="icon24">visibility</mat-icon>
          </button>
          &nbsp;
          <button class="button24" mat-icon-button color="warn"
                  matTooltip="Delete"
                  (click)="openDialogdel(order)"
                 >
            <mat-icon class="icon24">delete</mat-icon>
          </button>
        </td>
      </ng-container>




      <tr mat-header-row
          *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      <tr class="mat-row" *matNoDataRow>
        <td *ngIf="input.value" class="mat-cell" colspan="4">
          There is no order
          "{{input.value}}"</td>


      </tr>
    </table>





    <div *ngIf="dataSource.data?.length==0" fxLayoutAlign="center center">
      <h3>No Data</h3>
    </div>











    <mat-paginator [length]="dataSource.data.length" [pageSize]="5" [pageSizeOptions]="[5, 10, 20]">
    </mat-paginator>
    <mat-divider></mat-divider>



</div>


